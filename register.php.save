<?php
declare(strict_types=1);
require_once __DIR__ . '/config.php';
error_reporting(E_ALL);
ini_set('display_errors', '1');

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $username = trim($_POST['username'] ?? '');
    $password = trim($_POST['password'] ?? '');
    if ($username && $password) {
        $hash = password_hash($password, PASSWORD_DEFAULT);
        $stmt = $pdo->prepare('INSERT INTO users (username, password) VALUES (?, ?)');
        $stmt->execute([$username, $hash]);
        echo "<p style='color:lime'>âœ… Account created. <a href='/login.php'>Login</a></p>";
        exit;
    } else {
        echo "<p style='color:red'>All fields required.</p>";
    }
}
?>
<!DOCTYPE html>
<html lang="en"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Register - PurePressureLive</title>
<style>
body{background:#0b0b0f;color:#fff;font-family:sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;}
form{display:flex;flex-direction:column;width:300px;gap:10px;}
input{padding:10px;border-radius:6px;border:1px solid #ff2b70;background:#141414;color:#fff;}
button{padding:10px;border:none;border-radius:6px;background:#ff2b70;color:#fff;cursor:pointer;}
button:hover{background:#ff5891;}
</style></head><body>
<form method="POST">
<h2>Create Account</h2>
<input type="text" name="username" placeholder="Username" required>
<input type="password" name="password" placeholder="Password" required>
<button type="submit">Register</button>
<p><a href="/login.php" style="color:#ff2b70;">Already have an account?</a></p>
</form>
</body></html>
